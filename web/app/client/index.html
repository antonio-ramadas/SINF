<!-- Contact Master detail flow -->
<div id="main" class="container-fluid">
  <div class="row">

    <!-- Contact List -->
    <div id="contact-list-col" class="col-xs-12 col-md-3">
      <div class="sfa-panel">
        <div class="title"> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search Contacts </div>
        <div id="contact-search-bar" class="input-group input-group-lg">
          <span class="input-group-addon" id="sizing-addon1"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></span>
          <input type="text" [(ngModel)]="hint" (keyup)="eventHandler($event)" class="form-control" placeholder="Search for Client"
            aria-describedby="sizing-addon1">
          <span class="input-group-btn">
            <button class="btn btn-success" type="button" (click)="smModal.show()">+</button>
          </span>
        </div>
        <div id="contact-list-panel">
          <ul id="contact-list">
            <li *ngFor=" let customer of customers">
              <div class="contact-name"><a class="mouse-click" (click)="changeCustomer(customer.id)"> {{customer.id}} </a></div>
              <div class="contant-basic-info"> {{customer.name}} </div>
              <!--<div class="tag"> tag </div>-->
            </li>
          </ul>
        </div>
      </div>

    </div>

    <!-- Contact Detail -->
    <div id="client-col" class="col-xs-12 col-md-6">

      <!-- Contact Panel -->
      <div id="contact-panel" class="sfa-panel">
        <div>
          <div class="title"> <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Client Detail </div>
          <a href="tel:{{customer.phone}}">
            <button id="contact-button" type="button" class="btn btn-success" [(ngModel)]="singleModel" ngDefaultControl>
              Contact
            </button>
          </a>
        </div>
        <div id="contact-panel-header">
          <div id="contact-title">
            <div id="contact-title-name">
              <strong> {{customer.name}} </strong>
            </div>
            <div id="contact-title-organization">
              FEUP
            </div>
            <div id="contact-title-location">
              {{customer.address}}
            </div>
          </div>
        </div>
        <div id="contact-panel-content">
          <div class="row">
            <div class="col-xs-7">
              <strong>
                  Content Detail
                </strong>
              <div id="content-detail">
                <ul id="content-detail-list">
                  <li> <strong> ID: </strong> {{customer.id}} </li>
                  <li> <strong> Nationality: </strong> {{customer.nationality}} </li>
                  <li> <strong> Phone number: </strong> {{customer.phone}} </li>
                  <li> <strong> NIF: </strong> {{customer.nif}} </li>
                </ul>
                <button type="button" (click)="editInfo()" class="btn btn-primary" [(ngModel)]="singleModel" ngDefaultControl>
                    Edit Information
                  </button>
              </div>
            </div>
            <div class="col-xs-5">
              <div id="notes">
                <strong> Notes: </strong>
                <textarea id="note-area" [(ngModel)]="customer.notes"></textarea>
                <button class="btn btn-success" type="button" (click)="updateNotes()">Update notes</button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="col-xs-12 col-md-3">
      <!-- Order History -->
      <div class="contact-history">
        <div class="sfa-panel">
          <div class="title"> <span class="glyphicon glyphicon-book" aria-hidden="true"></span> Order History </div>
          <div id="table-wrapper">
            <div id="table-scroll">
              <table>
                <tr>
                  <th><span class="text">Date</span></th>
                  <th><span class="text">Total (€)</span></th>
                </tr>
                <tr class="sales-line" (click)="goToSalesOrder(sale.numDoc)" *ngFor="let sale of salesHistory">
                  <td> {{sale.date | date}} </td>
                  <td> {{sale.total}} </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div bsModal #smModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" aria-label="Close" (click)="smModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
          <h4 class="modal-title">Client Details</h4>
        </div>
        <div class="modal-body">
          <form [formGroup]="registerForm" (ngSubmit)="createNewClient()">

            <label>ID:</label>
            <input type="text" class="form-control" formControlName="id" required>

            <label>Name:</label>
            <input type="text" class="form-control" formControlName="name" required>

            <label>Date of Birth:</label>
            <input type="text" class="form-control" formControlName="birthDate" required>

            <label>Gender:</label>
            <input type="text" class="form-control" formControlName="gender" required>

            <label>Address:</label>
            <input type="text" class="form-control" formControlName="address" required>

            <label>Phone Number:</label>
            <input type="text" class="form-control" formControlName="phoneNumber" required>

            <label>Email:</label>
            <input type="email" class="form-control" formControlName="email" required>

            <label>NIF:</label>
            <input type="text" class="form-control" formControlName="nif" required>

            <label>Nationality:</label>
            <select class="form-control" formControlName="nationality" required>
              <option value="TODO">Falta pôr mais países. O Gui vai dar uma lista.</option>
              <option value="PT">Portugal</option>
              <option value="ES">Spain</option>
            </select>

            <label>Labels:</label>
            <select class="form-control" formControlName="labels">
              <option value="TODO">Falta haver uma API para obter todas as labels.</option>
              <option value="TODO2">Podem ser criadas novas labels aqui.</option>
              <option value="TODO3">Podem estar selecionadas zero ou mais labels.</option>
            </select>

            <label>Notes:</label>
            <input type="text" class="form-control" formControlName="notes">

            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>